Import('env')

test_env = env.Clone()
test_env['objroot'] += '/test'
test_env['extension'] = 'cpp'
test_env.Append(CPPPATH=[test_env['srcroot']])
test_env.Append(LIBPATH=[env['objroot']+'/eventrpc',])
test_env.Prepend(LIBS=
  [
    'eventrpc',
    'pthread',
    'event',
    'protobuf',
  ])

Export('test_env')

test_env['CCFLAGS'] = env['CCFLAGS']
src_files = [
  'atomic_test.cpp',
  'smart_ptr_test.cpp',
  'thread_test.cpp',
]

for file in src_files:
  test_env.Program(file)
